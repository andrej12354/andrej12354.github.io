<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <style>
    body { font-family: Arial; background: #111; color: #fff; text-align: center; }
    input, textarea, button { padding: 10px; margin: 5px; width: 300px; }
    .card { background: #222; padding: 20px; margin: 20px auto; border-radius: 10px; width: 400px; }
  </style>
</head>
<body>
  <h1>Staff Panel - Add Announcement</h1>
  <div class="card">
    <input type="password" id="password" placeholder="Enter Staff Password"><br>
    <input type="text" id="date" placeholder="Date (e.g. Sept 14, 2025)"><br>
    <textarea id="text" placeholder="Announcement text"></textarea><br>
    <button onclick="addAnnouncement()">Add Announcement</button>
  </div>

  <script>
    const STAFF_PASSWORD = "supersecret123"; // Change this!

    async function addAnnouncement() {
      const password = document.getElementById('password').value;
      if (password !== STAFF_PASSWORD) {
        alert('Incorrect password!');
        return;
      }

      const date = document.getElementById('date').value;
      const text = document.getElementById('text').value;
      if (!date || !text) {
        alert('Please fill in all fields');
        return;
      }

      const response = await fetch('announcements.json');
      const news = await response.json();
      news.unshift({ date, text });

      await fetch('save_announcements.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(news)
      });

      alert('Announcement added!');
    }
  </script>
</body>
</html>
